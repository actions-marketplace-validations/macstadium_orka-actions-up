name: 'orka-actions-up'
description: 'spin up an orka actions runner'
outputs:
  vm-name:
    description: "VM name"
    value: ${{ steps.runner-up.outputs.vm-name }}
runs:
  using: "composite"
  steps:
    - id: runner-up
      run: |
        ${{ github.action_path }}/run.sh
        export VM_NAME=$(< /dev/urandom tr -dc _A-Z-a-z-0-9 | head -c${1:-32};echo;)
        echo "::set-output name=vm-name::$(echo $VM_NAME)"
        python3 ${{ github.action_path }}/main.py
      shell: bash
